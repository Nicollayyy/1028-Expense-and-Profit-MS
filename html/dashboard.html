<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1028 Tea and Cafe - Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./../css/dashboard.css">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>1028 Tea and Cafe</h1>
        <div class="admin-profile" id="adminProfile">
            <div class="admin-text">
                <div class="label">Welcome</div>
                <div class="name">Admin</div>
            </div>
            <button class="profile-toggle" id="profileToggle" aria-expanded="false">â–¼</button>

            <div class="profile-dropdown" id="profileDropdown" hidden>
                <form method="post" action="../logout.php">
                    <button type="submit" class="dropdown-logout">Logout</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="nav-item active">
                
                <span>Dash Board</span>
            </div>
                <div class="indicator" aria-hidden="true"></div>
            <div class="nav-item">
                <span>View Profit</span>
            </div>
            <div class="nav-item">
                <span>View Expenses</span>
            </div>
            <div class="nav-item">
                <span>Products</span>
            </div>
            <div class="nav-item">

                <span>File Manager</span>
            </div>
            <div class="nav-item">
                <span>Analytics</span>
            </div>
            
        </div>

        <!-- Content Area -->
        <div class="content">
            <div class="content-title">Dash Board</div>

            <!-- Dashboard Cards -->
            <div class="dashboard-cards">
                <div class="card-box">
                    <h3>Profit</h3>
                    <a href="#">View Details</a>
                </div>
                <div class="card-box">
                    <h3>Expense</h3>
                    <a href="#">View Details</a>
                </div>
                <div class="card-box">
                    <h3>File Manager</h3>
                    <a href="#">View Details</a>
                </div>
            </div>

            <!-- System Title -->
            <div class="system-title">EXPENSE AND PROFIT MANAGEMENT SYSTEM</div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Move the sidebar indicator to the active item and animate on click
        (function() {
            const sidebar = document.querySelector('.sidebar');
            const indicator = sidebar.querySelector('.indicator');
            const items = Array.from(sidebar.querySelectorAll('.nav-item'))
                // Exclude the logout form item by checking for a button inside
                .filter(el => !el.querySelector('button'));

            function moveTo(el) {
                const sidebarRect = sidebar.getBoundingClientRect();
                const rect = el.getBoundingClientRect();
                const top = rect.top - sidebarRect.top;
                indicator.style.top = top + 'px';
                indicator.style.height = rect.height + 'px';
            }

            // initialize
            document.addEventListener('DOMContentLoaded', () => {
                const active = sidebar.querySelector('.nav-item.active') || items[0];
                if (active) moveTo(active);
            });

            // handle clicks
            items.forEach(it => {
                it.addEventListener('click', () => {
                    sidebar.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                    it.classList.add('active');
                    moveTo(it);
                });
            });
            // reposition on resize
            window.addEventListener('resize', () => {
                const active = sidebar.querySelector('.nav-item.active');
                if (active) moveTo(active);
            });
            // admin profile dropdown toggle
            const profileToggle = document.getElementById('profileToggle');
            const profileDropdown = document.getElementById('profileDropdown');
            const adminProfile = document.getElementById('adminProfile');

            function closeProfile() {
                profileDropdown.hidden = true;
                profileToggle.setAttribute('aria-expanded', 'false');
            }

            profileToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                const isOpen = profileDropdown.hidden === false;
                if (isOpen) closeProfile(); else {
                    profileDropdown.hidden = false;
                    profileToggle.setAttribute('aria-expanded', 'true');
                }
            });

            // Close when clicking outside
            document.addEventListener('click', (e) => {
                if (!adminProfile.contains(e.target)) {
                    closeProfile();
                }
            });
        })();
    </script>
</body>
</html>
